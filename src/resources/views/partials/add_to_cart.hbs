<div class="cart" onmouseover="showProductList()" onmouseout="hideProductList()">
  <div class="cart_image">
    <img src="image/cart.png">
  </div>
</div>

<script>

  
/*
function createProductList() {
  const ul = document.createElement('ul');

  products.forEach((product) => {
    const li = document.createElement('li');
    li.textContent = JSON.stringify(product);

    ul.appendChild(li);
  });

  return ul;
}

function showProductList() {
  if (!productList && is_getting_product) {
    productList = createProductList();
    const cart = document.querySelector('.cart');
    cart.appendChild(productList);
  }
}

function hideProductList() {
  if (productList && is_getting_product) {
    const cart = document.querySelector('.cart');
    cart.removeChild(productList);
    productList = null;
  }
}
};
 --}}
*/



</script>

<script>


  
var xhr = new XMLHttpRequest();
var url = "http://localhost:3000/user/cart";
var products;
var productList;

xhr.open("GET", url, true);

xhr.onreadystatechange = function() {
  if (xhr.readyState === XMLHttpRequest.DONE) {
    if (xhr.status === 200) {
      var response = xhr.response;
      // Process the response data
      console.log(response);
      products = response
      is_getting_product = true;
    } else {
      // Handle the error
      console.error('Error:', xhr.status);
    }
  }
};

xhr.send();

function createProductList() {
  const ul = document.createElement('ul');
  console.log()
  products.forEach((product) => {
    const li = document.createElement('li');
    li.textContent = JSON.stringify(product);

    ul.appendChild(li);
  });

  return ul;
}

 

function showProductList() {

for (var i = 0; i <= products.length; i++) {
// loop over a json object
console.log(products.length);


}



  if (!productList ) {
    productList = createProductList();
    const cart = document.querySelector('.cart');
    cart.appendChild(productList);
  }
}

function hideProductList() {
  if (productList) {
    const cart = document.querySelector('.cart');
    cart.removeChild(productList);
    productList = null;
  }


  
}





  




</script>